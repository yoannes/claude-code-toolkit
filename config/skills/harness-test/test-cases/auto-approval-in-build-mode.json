{
  "name": "auto-approval-in-forge-mode",
  "description": "Verify tools are auto-approved when build-state.json exists and is valid",
  "type": "hook",
  "target": "config/hooks/pretooluse-auto-approve.py",
  "setup": {
    "state_file": "build-state.json",
    "state_content": {
      "iteration": 1,
      "plan_mode_completed": true,
      "started_at": "2026-01-30T12:00:00Z"
    }
  },
  "prompt": "Read the file src/main.py and then write 'print(\"hello\")' to src/hello.py",
  "assertions": [
    {
      "type": "file_exists",
      "path": "src/hello.py"
    },
    {
      "type": "output_not_contains",
      "pattern": "permission denied|waiting for approval"
    }
  ],
  "timeout": 90
}
